<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gospel To Gentiles</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body class="dark-mode">
    <nav class="navbar">
      <div class="navbar-brand">Gospel Flowchart</div>

      <button class="hamburger-menu" id="hamburgerMenu">
        <i class="fas fa-bars"></i>
      </button>

      <ul class="navbar-nav" id="navbarNav">
        <li><a href="#start-section">Introduction</a></li>
        <li><a href="#creator-section">Creator God</a></li>
        <li><a href="#unity-fatherhood-section">Unity & Fatherhood</a></li>
        <li><a href="#no-idols-section">No Idols</a></li>
        <li><a href="#repentance-section">Repentance & Judgment</a></li>
        <li><a href="#solution-section">The Solution</a></li>
        <li><a href="#invitation-section">Invitation</a></li>
        <li class="nav-item theme-toggle-mobile">
          <button id="themeToggleMobile" class="theme-toggle-button"></button>
        </li>
      </ul>

      <div class="navbar-toggle desktop-toggle">
        <button id="themeToggleDesktop" class="theme-toggle-button"></button>
      </div>
    </nav>

    <div class="container">
      <div class="header">
        <h1>🌟 The Unity of God & Our Divine Heritage 🌟</h1>
        <p>A Bridge Between Biblical Truth and Mankind's Spiritual Journey</p>
      </div>

      <div class="flowchart">
        <div class="node start-node" id="start-section">
          <strong>🔍 Start: Connect through shared inquiry</strong><br />
          "Unknown God" (Acts 17) & Hindu quest for ultimate truth
        </div>

        <div class="arrow"></div>

        <div
          class="node main-node unity-highlight key-highlight"
          id="creator-section"
        >
          <strong>🌍 God as Creator & Sustainer</strong><br />
          Acts 17:24-25 - "The God who made the world and everything in it"
        </div>

        <div class="parallel-group">
          <div class="node parallel-node">
            📿 <strong>Hindu Parallel:</strong><br />
            Formless Brahman - God as Immeasurable/Bodyless (Yajurveda)
          </div>
          <div class="node parallel-node">
            🕉️ <strong>Hindu Parallel:</strong><br />
            God as Sustainer (Vishnu/Pervasive Divine)
          </div>
        </div>

        <div class="arrow"></div>

        <div
          class="node main-node children-highlight key-highlight"
          id="unity-fatherhood-section"
        >
          <strong>👨‍👩‍👧‍👦 Unity of God & Divine Fatherhood</strong><br />
          Acts 17:26, 28 - "We are his offspring" -
          <em>WE ARE CHILDREN OF GOD!</em>
        </div>

        <div class="parallel-group">
          <div class="node parallel-node unity-highlight">
            ☝️ <strong>Hindu Parallel:</strong><br />
            "God is only one without two" (Rigveda) -
            <strong>GOD IS ONE!</strong>
          </div>
          <div class="node parallel-node children-highlight">
            👑 <strong>Hindu Parallel:</strong><br />
            "Sons of the Immortal" (Svetasvatara Upanishad) -
            <strong>DIVINE CHILDREN!</strong>
          </div>
          <div class="node parallel-node">
            🕉️ <strong>Hindu Parallel:</strong><br />
            Paramatma/Maheshwara (Bhagavad Gita)
          </div>
        </div>

        <div class="arrow"></div>

        <div class="node main-node" id="no-idols-section">
          <strong>🚫 God Not Limited by Idols</strong><br />
          Acts 17:29 - Divine nature not like gold, silver, or stone
        </div>

        <div class="parallel-group">
          <div class="node parallel-node">
            🚫 <strong>Hindu Parallel:</strong><br />
            "No human image for Him" (Yajurveda)
          </div>
          <div class="node parallel-node">
            🎭 <strong>Hindu Parallel:</strong><br />
            Deities as Symbolic in Nature
          </div>
        </div>

        <div class="arrow"></div>

        <div class="node main-node" id="repentance-section">
          <strong>⚖️ Call to Repentance & Judgment</strong><br />
          Acts 17:30-31 - God commands all people to repent
        </div>

        <div class="parallel-group">
          <div class="node parallel-node">
            🔄 <strong>Hindu Parallel:</strong><br />
            Karma & Dharma (accountability)
          </div>
          <div class="node parallel-node">
            🧘 <strong>Hindu Parallel:</strong><br />
            Tapasya/Prayaschitta (seeking purification)
          </div>
        </div>

        <div class="arrow"></div>

        <div class="node solution-node" id="solution-section">
          <strong>✨ The Solution: Jesus Christ</strong><br />
          Acts 17:31 - God's appointed Judge and Savior<br />
          <em>Proof: His physical resurrection from the dead</em>
        </div>

        <div class="arrow"></div>

        <div class="node invitation-node" id="invitation-section">
          <strong>🎯 INVITATION TO ETERNAL LIFE</strong><br />
          Believe in Jesus for forgiveness and eternal life<br />
          <em>As children of the ONE GOD, we can return to our Father!</em>
        </div>
      </div>

      <div class="legend">
        <div class="legend-item">
          <div class="legend-color unity-color"></div>
          <span><strong>God is One</strong> - Unity Emphasis</span>
        </div>
        <div class="legend-item">
          <div class="legend-color children-color"></div>
          <span><strong>Children of God</strong> - Divine Heritage</span>
        </div>
        <div class="legend-item">
          <span>⭐ Key Biblical-Hindu Connections</span>
        </div>
      </div>
    </div>

    <script>
      // Set initial theme to dark if not already set, or load from localStorage
      const body = document.body;
      const themeToggleDesktop = document.getElementById("themeToggleDesktop");
      const themeToggleMobile = document.getElementById("themeToggleMobile");
      const currentTheme = localStorage.getItem("theme");

      // Function to set the theme and update icons
      function setTheme(theme) {
        body.classList.remove("light-mode", "dark-mode");
        body.classList.add(theme + "-mode");
        localStorage.setItem("theme", theme);
        updateThemeIcons(theme);
      }

      // Function to update the sun/moon icons
      function updateThemeIcons(theme) {
        if (theme === "light") {
          themeToggleDesktop.innerHTML = '<i class="fas fa-moon"></i>';
          themeToggleMobile.innerHTML = '<i class="fas fa-moon"></i>';
        } else {
          themeToggleDesktop.innerHTML = '<i class="fas fa-sun"></i>';
          themeToggleMobile.innerHTML = '<i class="fas fa-sun"></i>';
        }
      }

      if (currentTheme) {
        setTheme(currentTheme);
      } else {
        setTheme("dark"); // Default to dark mode
      }

      // Add interactive hover effects (existing code)
      const nodes = document.querySelectorAll(".node");

      nodes.forEach((node) => {
        node.addEventListener("click", function () {
          // Create ripple effect
          const ripple = document.createElement("div");
          ripple.style.position = "absolute";
          ripple.style.borderRadius = "50%";
          ripple.style.background = "rgba(255, 255, 255, 0.6)";
          ripple.style.transform = "scale(0)";
          ripple.style.animation = "ripple 0.6s linear";
          ripple.style.left = "50%";
          ripple.style.top = "50%";
          ripple.style.width = "20px";
          ripple.style.height = "20px";
          ripple.style.marginLeft = "-10px";
          ripple.style.marginTop = "-10px";

          this.appendChild(ripple);

          setTimeout(() => {
            ripple.remove();
          }, 600);
        });
      });

      // Theme toggle functionality
      themeToggleDesktop.addEventListener("click", () => {
        if (body.classList.contains("light-mode")) {
          setTheme("dark");
        } else {
          setTheme("light");
        }
      });

      themeToggleMobile.addEventListener("click", () => {
        if (body.classList.contains("light-mode")) {
          setTheme("dark");
        } else {
          setTheme("light");
        }
      });

      // Hamburger menu functionality
      const hamburgerMenu = document.getElementById("hamburgerMenu");
      const navbarNav = document.getElementById("navbarNav");

      hamburgerMenu.addEventListener("click", () => {
        navbarNav.classList.toggle("active");
        hamburgerMenu.querySelector("i").classList.toggle("fa-bars");
        hamburgerMenu.querySelector("i").classList.toggle("fa-times"); // Change to 'X' icon
      });

      // Close mobile menu when a nav link is clicked
      navbarNav.querySelectorAll("a").forEach((link) => {
        link.addEventListener("click", () => {
          if (navbarNav.classList.contains("active")) {
            navbarNav.classList.remove("active");
            hamburgerMenu.querySelector("i").classList.remove("fa-times");
            hamburgerMenu.querySelector("i").classList.add("fa-bars");
          }
        });
      });

      // Add CSS for ripple animation (existing code)
      const style = document.createElement("style");
      style.textContent = `
            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
      document.head.appendChild(style);

      // --- NEW/UPDATED JavaScript for active navbar tabs ---
      const sections = document.querySelectorAll(".flowchart > div[id]");
      const navLinks = document.querySelectorAll(".navbar-nav a");

      function highlightNavLink() {
        let current = "";
        const scrollY = window.pageYOffset; // Use window.pageYOffset for broader compatibility

        // Loop through sections to find the one currently in view
        sections.forEach((section) => {
          const sectionTop = section.offsetTop - 90; // Adjust for fixed navbar height + some buffer
          const sectionHeight = section.clientHeight;

          if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
            current = section.getAttribute("id");
          }
        });

        // If no section is in view (e.g., at the very top before the first section),
        // default to the first nav link.
        // This also handles the case where scrollY is 0 and no section has been scrolled into.
        if (
          current === "" &&
          sections.length > 0 &&
          scrollY < sections[0].offsetTop - 90
        ) {
          current = sections[0].getAttribute("id");
        }

        // Remove 'active' from all links and add to the current one
        navLinks.forEach((link) => {
          link.classList.remove("active");
          if (link.href.includes(current)) {
            link.classList.add("active");
          }
        });
      }

      window.addEventListener("scroll", highlightNavLink);
      window.addEventListener("load", highlightNavLink); // Call on load to set initial active tab
    </script>
  </body>
</html>
